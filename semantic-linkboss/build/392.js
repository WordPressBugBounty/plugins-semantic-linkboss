"use strict";(globalThis.webpackChunksemantic_linkboss=globalThis.webpackChunksemantic_linkboss||[]).push([[392],{7392:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(1609),n=s(7723),r=s(1083),o=s(8465),i=s.n(o),l=s(7470),c=s(513),d=s(982),m=s(6188);const b=()=>{const{triggerRefresh:e,triggerResetQuery:t}=(0,a.useContext)(c.B),[s,o]=(0,a.useState)(!0),[b,g]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[y,k]=(0,a.useState)([]),[f,h]=(0,a.useState)([]),[_,x]=(0,a.useState)(!1),[v,w]=(0,a.useState)("post_types"),[E,C]=(0,a.useState)(""),[N,B]=(0,a.useState)(""),[L,S]=(0,a.useState)(""),[A,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{const[e,t,s,a]=await Promise.all([r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_wp_post_types"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_custom_query"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_cats_by_post_type"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_url_list"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}})]),n=e.data||[],o=Object.keys(n).map(e=>({id:e,value:e,label:n[e]}));g(o);const i=(t.data.post_sources||[]).map(e=>({id:e,value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}));k(i);const l=t.data.categories||[];p(l.map(e=>({value:e.id,label:e.name})));const c=s.data||[];p(c.map(e=>({value:e.id,label:e.name})));const d=t.data.categories||[];h(d.map(e=>{const t=c.find(t=>t.id===parseInt(e));return t?{value:t.id,label:t.name}:null}).filter(Boolean)),a?.data?.url_list&&C(a.data.url_list)}catch(e){console.error("Error fetching data:",e)}finally{o(!1)}})()},[]);const R=e=>{if(!e.trim())return{valid:!1,error:(0,n.__)("Please enter at least one URL.","semantic-linkboss")};const t=e.split("\n").filter(e=>""!==e.trim()),s=/^(https?:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)?$/i,a=t.filter(e=>!s.test(e.trim()));return a.length>0?{valid:!1,error:(0,n.__)("The following URLs are invalid:","semantic-linkboss")+"\n"+a.join("\n")}:{valid:!0,error:""}},[W,F]=(0,a.useState)("10"),[X,U]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{try{const[e,t,s]=await Promise.all([r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_sync_speed"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_acf_enabled"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_woo_enabled"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}})]);F(e?.data?.sync_speed),U(t?.data?.acf_enabled),z(s?.data?.woo_enabled)}catch(e){console.error("Error fetching settings:",e)}})()},[]),s?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"text-center"},(0,n.__)("Loading","semantic-linkboss"),"..."),(0,a.createElement)("div",{className:"flex justify-center items-center h-40 mt-12"},(0,a.createElement)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"}))):(0,a.createElement)("div",{className:"relative bg-white dark:bg-gray-900 text-gray-700"},(0,a.createElement)("div",{className:"mb-8 p-6 border border-gray-200 rounded-lg shadow-sm dark:border-gray-700"},(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.mRM,className:"w-5 h-5 text-indigo-600 mr-3 dark:text-indigo-400"}),(0,a.createElement)("h5",{className:"text-slate-800 text-xl font-semibold dark:text-gray-200"},(0,n.__)("Query Builder for Syncing","semantic-linkboss"))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("You can sync specific articles by filtering them by categories, post types, or by providing specific URLs.","semantic-linkboss")),(0,a.createElement)("div",{className:"mb-4 border-b border-gray-200 dark:border-gray-700"},(0,a.createElement)("ul",{className:"flex flex-wrap -mb-px text-sm font-medium text-center text-gray-500 dark:text-gray-400"},(0,a.createElement)("li",{className:"me-2"},(0,a.createElement)("button",{onClick:()=>{w("post_types"),S("")},className:"inline-block p-4 rounded-t-lg "+("post_types"===v?"text-blue-600 dark:text-blue-500 bg-gray-50 dark:bg-gray-800 border-b-2 border-blue-600 dark:border-blue-500":"hover:text-gray-600 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-300")},(0,n.__)("Sync by Post Types","semantic-linkboss"))),(0,a.createElement)("li",{className:"me-2"},(0,a.createElement)("button",{onClick:()=>{w("urls"),S("")},className:"inline-block p-4 rounded-t-lg "+("urls"===v?"text-blue-600 dark:text-blue-500 bg-gray-50 dark:bg-gray-800 border-b-2 border-blue-600 dark:border-blue-500":"hover:text-gray-600 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-300")},(0,n.__)("Sync by URLs","semantic-linkboss"))),(0,a.createElement)("li",{className:"me-2"},(0,a.createElement)("button",{onClick:()=>{w("remove_urls"),S("")},className:"inline-block p-4 rounded-t-lg "+("remove_urls"===v?"text-blue-600 dark:text-blue-500 bg-gray-50 dark:bg-gray-800 border-b-2 border-blue-600 dark:border-blue-500":"hover:text-gray-600 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-300")},(0,n.__)("Remove Synced Contents by URLs","semantic-linkboss"))))),"post_types"===v&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("h6",{className:"mb-2 text-slate-800 text-md font-semibold dark:text-gray-300"},(0,n.__)("Select Post Types","semantic-linkboss")),(0,a.createElement)(l.Ay,{options:b,value:y,placeholder:"Select Post Types",name:"linkboss_qb[post_sources][]",className:"mb-4",isClearable:!0,isMulti:!0,onChange:async e=>{if(k(e),!e||0===e.length){try{const e=(await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_custom_query"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}})).data.categories||[];p(e.map(e=>({value:e.id,label:e.name})))}catch(e){console.error("Error fetching categories:",e)}return}const t=e.map(e=>e.value).filter(e=>"page"!==e);if(0!==t.length)try{const e=(await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_cats_by_post_type",post_type:t},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}})).data||[];p(e.map(e=>({value:e.id,label:e.name})))}catch(e){console.error("Error fetching categories:",e)}else p([])}}),(0,a.createElement)("h6",{className:"mb-2 text-slate-800 text-md font-semibold dark:text-gray-300"},(0,n.__)("Select Categories","semantic-linkboss")),(0,a.createElement)(l.Ay,{options:u,placeholder:"Select Categories",name:"linkboss_qb[categories][]",isClearable:!0,isMulti:!0,value:f,onChange:h})),"urls"===v&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.CQO,className:"w-5 h-5 text-indigo-600 mr-3 dark:text-indigo-400"}),(0,a.createElement)("h6",{className:"text-slate-800 text-md font-semibold dark:text-gray-300"},(0,n.__)("Enter URLs to Sync","semantic-linkboss"))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("Enter one URL per line. These URLs will be synced regardless of their post type.","semantic-linkboss")),(0,a.createElement)("textarea",{value:E,onChange:e=>{C(e.target.value),S("")},placeholder:(0,n.__)("https://example.com/page1\nhttps://example.com/page2","semantic-linkboss"),className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",rows:"8"}),L&&(0,a.createElement)("div",{className:"mt-2 text-red-500 text-sm whitespace-pre-line"},L)),"remove_urls"===v&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.CQO,className:"w-5 h-5 text-red-600 mr-3 dark:text-red-400"}),(0,a.createElement)("h6",{className:"text-slate-800 text-md font-semibold dark:text-gray-300"},(0,n.__)("Enter URLs to Remove","semantic-linkboss"))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("Enter one URL per line. These URLs will be removed from the LinkBoss app.","semantic-linkboss")),(0,a.createElement)("textarea",{value:N,onChange:e=>{B(e.target.value),S("")},placeholder:(0,n.__)("https://example.com/page1\nhttps://example.com/page2","semantic-linkboss"),className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",rows:"8"}),L&&(0,a.createElement)("div",{className:"mt-2 text-red-500 text-sm whitespace-pre-line"},L)),"remove_urls"!==v&&(0,a.createElement)("button",{className:"mt-6 px-6 py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-semibold dark:bg-blue-900 dark:hover:bg-indigo-700",onClick:async()=>{x(!0);try{let s;if(i().fire({title:"Loading...",allowOutsideClick:!1,didOpen:()=>{i().showLoading()}}),"post_types"===v)s=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"save_query",linkboss_qb:{post_sources:y.map(e=>e.value),categories:f.map(e=>e.value),sync_by:"post_types"}},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}});else{const e=R(E);if(!e.valid)return S(e.error),i().close(),void x(!1);S(""),s=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"save_query",linkboss_qb:{url_list:E,sync_by:"urls"}},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}})}i().fire({title:(0,n.__)("Query Settings Saved. Now, you can Prepare and Sync with the new settings.","semantic-linkboss"),icon:"success",showConfirmButton:!0}),e(),t()}catch(e){console.error("Error saving settings:",e)}finally{x(!1)}},disabled:_},_?(0,n.__)("Saving...","semantic-linkboss"):(0,n.__)("Save Query","semantic-linkboss")),"remove_urls"===v&&(0,a.createElement)("button",{className:"mt-6 px-6 py-3 bg-red-600 text-white rounded hover:bg-red-700 font-semibold dark:bg-red-900 dark:hover:bg-red-700",onClick:async()=>{P(!0),S("");try{const s=R(N);if(!s.valid)return S(s.error),void P(!1);i().fire({title:"Processing...",allowOutsideClick:!1,didOpen:()=>{i().showLoading()}});const a=N.split("\n").filter(e=>""!==e.trim()).map(async e=>{try{const t=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings",{action:"get_post_id_from_url",url:e.trim()},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}});return t?.data?.post_id?{_postId:t.data.post_id,postStatus:"trash"}:null}catch(t){return console.error(`Error getting post ID for URL ${e}:`,t),null}}),o=(await Promise.all(a)).filter(e=>null!==e);if(0===o.length)return i().fire({icon:"error",title:(0,n.__)("Error","semantic-linkboss"),text:(0,n.__)("No valid post IDs could be found for the provided URLs.","semantic-linkboss")}),void P(!1);const l=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/proxy-sync",{posts:o},{headers:{"Content-Type":"application/json","X-WP-Nonce":LinkBossConfig.nonce}});if(201!==l.status)throw new Error((0,n.__)("Unexpected response from server.","semantic-linkboss"));{const s=l.data.message.match(/(\d+)Posts deleted/),a=s?s[1]:o.length;i().fire({icon:"success",title:(0,n.__)("Success!","semantic-linkboss"),text:(0,n.__)(`No. of URLs Successfully removed from the LinkBoss app: ${a}`,"semantic-linkboss")}),B(""),e(),t()}}catch(e){console.error("Error removing URLs:",e),i().fire({icon:"error",title:(0,n.__)("Error","semantic-linkboss"),text:e.response?.data?.message||e.message||(0,n.__)("An error occurred while removing URLs.","semantic-linkboss")})}finally{P(!1)}},disabled:A},A?(0,n.__)("Removing...","semantic-linkboss"):(0,n.__)("Remove URLs","semantic-linkboss"))),(0,a.createElement)("div",{className:"mb-8 p-6 border border-gray-200 rounded-lg shadow-sm dark:border-gray-700"},(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.QtJ,className:"w-5 h-5 text-indigo-600 mr-3 dark:text-indigo-400"}),(0,a.createElement)("h5",{className:"text-slate-800 text-xl font-semibold dark:text-gray-200"},(0,n.__)("ACF Custom Fields Support (Beta)","semantic-linkboss")),(0,a.createElement)("div",{className:"relative ml-2 group"},(0,a.createElement)(d.g,{icon:m.iW_,className:"w-4 h-4 text-gray-400 cursor-help dark:text-gray-500"}),(0,a.createElement)("div",{className:"absolute left-0 bottom-full mb-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10"},(0,n.__)("Advanced Custom Fields integration allows LinkBoss to process and update content stored in ACF fields.","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("Enable this option to sync and update Advanced Custom Fields (ACF) content for Gutenberg, Classic, and Elementor.","semantic-linkboss")),(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)("label",{className:"inline-flex items-center cursor-pointer"},(0,a.createElement)("input",{type:"checkbox",className:"sr-only peer",checked:X,onChange:async()=>{try{i().fire({title:"Loading...",allowOutsideClick:!1,didOpen:()=>{i().showLoading()}});const s=!X;U(s),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"save_acf_enabled",acf_enabled:s},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"reset_sync_batch"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),s?i().fire({title:(0,n.__)("ACF Support Enabled & Sync Reset","semantic-linkboss"),text:(0,n.__)("ACF support has been enabled and sync has been reset to ensure all content is processed with the new setting.","semantic-linkboss"),icon:"success",showConfirmButton:!0}):i().fire({title:(0,n.__)("ACF Support Disabled & Sync Reset","semantic-linkboss"),text:(0,n.__)("ACF support has been disabled and sync has been reset to ensure all content is processed with the new setting.","semantic-linkboss"),icon:"success",showConfirmButton:!0}),e(),t()}catch(e){console.error("Error saving ACF settings:",e),i().fire({title:(0,n.__)("Error","semantic-linkboss"),text:(0,n.__)("There was an error updating the settings.","semantic-linkboss"),icon:"error",showConfirmButton:!0})}}}),(0,a.createElement)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,a.createElement)("span",{className:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},X?(0,n.__)("Enabled","semantic-linkboss"):(0,n.__)("Disabled","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-500 text-sm mb-4 dark:text-gray-400"},(0,n.__)("Note: After enabling it, please do a reset and force sync.","semantic-linkboss"))),(0,a.createElement)("div",{className:"mb-8 p-6 border border-gray-200 rounded-lg shadow-sm dark:border-gray-700"},(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.KtJ,className:"w-5 h-5 text-indigo-600 mr-3 dark:text-indigo-400"}),(0,a.createElement)("h5",{className:"text-slate-800 text-xl font-semibold dark:text-gray-200"},(0,n.__)("WooCommerce Category Sync (Beta)","semantic-linkboss")),(0,a.createElement)("div",{className:"relative ml-2 group"},(0,a.createElement)(d.g,{icon:m.iW_,className:"w-4 h-4 text-gray-400 cursor-help dark:text-gray-500"}),(0,a.createElement)("div",{className:"absolute left-0 bottom-full mb-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10"},(0,n.__)("This feature allows LinkBoss to process WooCommerce product categories for better e-commerce site optimization.","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("Enable this option to sync WooCommerce product categories and category descriptions.","semantic-linkboss")),(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)("label",{className:"inline-flex items-center cursor-pointer"},(0,a.createElement)("input",{type:"checkbox",className:"sr-only peer",checked:T,onChange:async()=>{try{i().fire({title:"Loading...",allowOutsideClick:!1,didOpen:()=>{i().showLoading()}});const s=!T;z(s),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"save_woo_enabled",woo_enabled:s},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"reset_sync_batch"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),s?i().fire({title:(0,n.__)("WooCommerce Category Sync Enabled & Sync Reset","semantic-linkboss"),text:(0,n.__)("WooCommerce category sync has been enabled and sync has been reset to ensure all content is processed with the new setting.","semantic-linkboss"),icon:"success",showConfirmButton:!0}):i().fire({title:(0,n.__)("WooCommerce Category Sync Disabled & Sync Reset","semantic-linkboss"),text:(0,n.__)("WooCommerce category sync has been disabled and sync has been reset to ensure all content is processed with the new setting.","semantic-linkboss"),icon:"success",showConfirmButton:!0}),e(),t()}catch(e){console.error("Error saving WooCommerce settings:",e),i().fire({title:(0,n.__)("Error","semantic-linkboss"),text:(0,n.__)("There was an error updating the settings.","semantic-linkboss"),icon:"error",showConfirmButton:!0})}}}),(0,a.createElement)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,a.createElement)("span",{className:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"},T?(0,n.__)("Enabled","semantic-linkboss"):(0,n.__)("Disabled","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-500 text-sm mb-4 dark:text-gray-400"},(0,n.__)("Note: After enabling it, please do a reset and force sync.","semantic-linkboss"))),(0,a.createElement)("div",{className:"mb-8 p-6 border border-gray-200 rounded-lg shadow-sm dark:border-gray-700"},(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.bgB,className:"w-5 h-5 text-indigo-600 mr-3 dark:text-indigo-400"}),(0,a.createElement)("h5",{className:"text-slate-800 text-xl font-semibold dark:text-gray-200"},(0,n.__)("Sync Speed","semantic-linkboss")),(0,a.createElement)("div",{className:"relative ml-2 group"},(0,a.createElement)(d.g,{icon:m.iW_,className:"w-4 h-4 text-gray-400 cursor-help dark:text-gray-500"}),(0,a.createElement)("div",{className:"absolute left-0 bottom-full mb-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10"},(0,n.__)("Adjust this setting based on your server capabilities. Lower values are safer for shared hosting environments.","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("Configure the sync speed for syncing posts or contents with LinkBoss App. Sometimes you may need to slow down the sync speed to avoid server load.","semantic-linkboss")),(0,a.createElement)(l.Ay,{options:[{value:"1",label:"1 Content(Debug Purpose)"},{value:"10",label:"10 Contents"},{value:"20",label:"20 Contents"},{value:"30",label:"30 Contents"},{value:"50",label:"50 Contents"}],defaultValue:{value:"10",label:"10 Contents"},placeholder:"Select Sync Speed",onChange:e=>F(e.value),value:{value:W,label:W+" Contents"}}),(0,a.createElement)("button",{className:"mt-6 px-6 py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-semibold dark:bg-blue-900 dark:hover:bg-indigo-700",onClick:async()=>{try{i().fire({title:"Loading...",allowOutsideClick:!1,didOpen:()=>{i().showLoading()}}),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"save_sync_speed",sync_speed:W},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),i().fire({title:(0,n.__)("Sync Speed Saved","semantic-linkboss"),icon:"success",showConfirmButton:!1,timer:1500})}catch(e){console.error("Error saving settings:",e)}}},(0,n.__)("Save Sync Speed","semantic-linkboss"))),(0,a.createElement)("div",{className:"mb-8 p-6 border border-gray-200 rounded-lg shadow-sm dark:border-gray-700"},(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.hem,className:"w-5 h-5 text-indigo-600 mr-3 dark:text-indigo-400"}),(0,a.createElement)("h5",{className:"text-slate-800 text-xl font-semibold dark:text-gray-200"},(0,n.__)("Reset Sync","semantic-linkboss")),(0,a.createElement)("div",{className:"relative ml-2 group"},(0,a.createElement)(d.g,{icon:m.iW_,className:"w-4 h-4 text-gray-400 cursor-help dark:text-gray-500"}),(0,a.createElement)("div",{className:"absolute left-0 bottom-full mb-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10"},(0,n.__)("Use this option when you need to completely restart the sync process, such as after changing important settings.","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-500 mb-4 dark:text-gray-300"},(0,n.__)("This will remove all the queue posts and start syncing from the beginning.","semantic-linkboss")),(0,a.createElement)("button",{className:"px-6 py-3 bg-red-600 text-white rounded hover:bg-red-700 font-semibold dark:bg-red-900 dark:hover:bg-red-700",onClick:async()=>{if((await i().fire({title:(0,n.__)("Are you sure?","semantic-linkboss"),text:(0,n.__)("You won't be able to revert this!","semantic-linkboss"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:(0,n.__)("Yes, reset it!","semantic-linkboss")})).isConfirmed)try{i().fire({title:"Loading...",allowOutsideClick:!1,didOpen:()=>{i().showLoading()}}),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"reset_sync_batch"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),i().fire({title:(0,n.__)("Sync Reset Success.","semantic-linkboss"),icon:"success",showConfirmButton:!1,timer:1500}),e(),t()}catch(e){console.error("Error resetting sync:",e)}}},(0,n.__)("Reset Sync","semantic-linkboss"))))},g=()=>{const{triggerRefresh:e}=(0,a.useContext)(c.B),[t,s]=(0,a.useState)(!1);return(0,a.createElement)("div",{className:"mt-0"},(0,a.createElement)("div",{className:"mb-6 relative flex flex-col bg-clip-border rounded-xl bg-white dark:bg-gray-900 text-gray-700 shadow-sm"},(0,a.createElement)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100 dark:border-gray-800"},(0,a.createElement)("div",null,(0,a.createElement)("h4",{className:"text-xl font-semibold text-slate-800 dark:text-white"},(0,n.__)("Advanced Sync Settings","semantic-linkboss")),(0,a.createElement)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400"},(0,n.__)("Configure advanced settings for syncing your data with LinkBoss App.","semantic-linkboss"))),(0,a.createElement)("button",{onClick:()=>{window.location.hash="sync",window.location.reload()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 hover:bg-blue-200 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800"},(0,a.createElement)(d.g,{icon:m.CeG,className:"w-4 h-4"}),(0,a.createElement)("span",null,(0,n.__)("Back to Sync","semantic-linkboss")))),(0,a.createElement)("div",{className:"p-6"},(0,a.createElement)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 dark:bg-gray-800 dark:border-blue-600"},(0,a.createElement)("div",{className:"flex items-start"},(0,a.createElement)(d.g,{icon:m.iW_,className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 dark:text-blue-400"}),(0,a.createElement)("div",null,(0,a.createElement)("p",{className:"text-sm text-blue-700 dark:text-blue-300"},(0,n.__)("These advanced settings allow you to fine-tune how LinkBoss syncs your content. Changes to these settings may require a reset and force sync to take effect.","semantic-linkboss"))))),(0,a.createElement)(b,null),(0,a.createElement)("div",{className:"mt-8 p-6 border border-amber-200 bg-amber-50 rounded-lg shadow-sm dark:border-amber-700 dark:bg-amber-900/20"},(0,a.createElement)("div",{className:"flex items-center mb-4"},(0,a.createElement)(d.g,{icon:m.BF2,className:"w-5 h-5 text-amber-600 mr-3 dark:text-amber-400"}),(0,a.createElement)("h5",{className:"text-slate-800 text-xl font-semibold dark:text-gray-200"},(0,n.__)("Quick Reset & Full Sync","semantic-linkboss")),(0,a.createElement)("div",{className:"relative ml-2 group"},(0,a.createElement)(d.g,{icon:m.iW_,className:"w-4 h-4 text-gray-400 cursor-help dark:text-gray-500"}),(0,a.createElement)("div",{className:"absolute left-0 bottom-full mb-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10"},(0,n.__)("One-click solution to reset and perform a complete fresh sync. Useful after changing settings.","semantic-linkboss")))),(0,a.createElement)("div",{className:"text-gray-600 mb-4 dark:text-gray-300"},(0,n.__)("Use this one-click solution to reset sync data and perform a complete fresh sync. This is especially useful after changing settings like ACF support, WooCommerce sync, or query filters.","semantic-linkboss")),(0,a.createElement)("button",{className:"px-6 py-3 bg-amber-600 text-white rounded hover:bg-amber-700 font-semibold dark:bg-amber-700 dark:hover:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:async()=>{if(!(await i().fire({title:(0,n.__)("Reset & Full Sync","semantic-linkboss"),html:`\n        <div class="text-left" style="font-size: 15px;">\n          <p class="mb-5 text-base" style="font-size: 15px; color: #4b5563; padding-top: 8px;">\n            ${(0,n.__)("This will perform the following actions:","semantic-linkboss")}\n          </p>\n          <ol class="space-y-3 mb-4" style="font-size: 15px; line-height: 1.8; list-style: none; padding-left: 0;">\n            <li style="color: #374151; display: flex; align-items: start; gap: 12px;">\n              <span style="background: #fee2e2; color: #dc2626; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; flex-shrink: 0;">1</span>\n              <span style="padding-top: 3px;">\n                ${(0,n.__)("Reset all sync data and queue","semantic-linkboss")}\n              </span>\n            </li>\n            <li style="color: #374151; display: flex; align-items: start; gap: 12px;">\n              <span style="background: #dbeafe; color: #2563eb; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; flex-shrink: 0;">2</span>\n              <span style="padding-top: 3px;">\n                ${(0,n.__)("Prepare all contents for syncing","semantic-linkboss")}\n              </span>\n            </li>\n            <li style="color: #374151; display: flex; align-items: start; gap: 12px;">\n              <span style="background: #d1fae5; color: #059669; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; flex-shrink: 0;">3</span>\n              <span style="padding-top: 3px;">\n                ${(0,n.__)("Sync all contents to LinkBoss","semantic-linkboss")}\n              </span>\n            </li>\n          </ol>\n          <p class="mb-3 font-semibold" style="font-size: 14px; color: #d97706; line-height: 1.6; background: #fef3c7; padding: 12px; border-radius: 6px; border-left: 4px solid #f59e0b;">\n            ⚠️ ${(0,n.__)("This process may take several minutes depending on your content volume.","semantic-linkboss")}\n          </p>\n          <p class="text-base font-medium" style="font-size: 15px; color: #1f2937; padding-top: 8px;">\n            ${(0,n.__)("Are you sure you want to continue?","semantic-linkboss")}\n          </p>\n        </div>\n      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#f59e0b",cancelButtonColor:"#6b7280",confirmButtonText:(0,n.__)("Yes, Reset & Sync","semantic-linkboss"),cancelButtonText:(0,n.__)("Cancel","semantic-linkboss"),customClass:{popup:"text-left"}})).isConfirmed)return;s(!0);let t=1;try{i().fire({title:(0,n.__)("Stage 1/3: Resetting Sync Data","semantic-linkboss"),html:(0,n.__)("Clearing previous sync data...","semantic-linkboss"),allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{i().showLoading()}});const s=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/settings/update",{action:"reset_sync_batch"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}});if(!s?.data)throw new Error((0,n.__)("Failed to reset sync data","semantic-linkboss"));e(),t=2,i().update({title:(0,n.__)("Stage 2/3: Preparing Posts","semantic-linkboss"),html:(0,n.__)("Preparing posts for syncing...","semantic-linkboss")});let a=!0,o=0;for(;a;){o++,i().update({html:(0,n.__)(`Preparing posts... (Batch #${o})`,"semantic-linkboss")});const e=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/init/set",{action:"init_posts_ids_batch"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}});a=!0===e?.data?.has_post}e(),t=3,i().update({title:(0,n.__)("Stage 3/3: Syncing Content","semantic-linkboss"),html:(0,n.__)("Syncing content to LinkBoss...","semantic-linkboss")});const l=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/init",{action:"init_batch_reports",who:"syncPosts"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),c="urls"===l?.data?.reports?.sync_method,d={posts:c?l?.data?.reports?.urls:l?.data?.reports?.posts,pages:c?0:l?.data?.reports?.pages,category:l?.data?.reports?.total_categories,sync_done:l?.data?.reports?.sync_done,sync_method:l?.data?.reports?.sync_method},m=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/sync",{action:"sync_init",force_data:"yes",...d},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}});if("success"!==m?.data?.status)throw new Error(m?.data?.message||(0,n.__)("Failed to initialize sync","semantic-linkboss"));let b=m?.data?.batch?.length;await(async e=>{for(;;){const t=await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/sync",{action:"prepare_batch_for_sync"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}});if(400===t?.data?.data?.srv_status?.status)throw new Error(t.data.data.srv_status.msg);if("yes"===t?.data?.data?.has_batch){const s=Math.round((e-t.data.data.batch_length)/e*100);i().update({html:(0,n.__)(`Syncing content... ${s}% complete`,"semantic-linkboss")});continue}break}})(b),await r.A.post(LinkBossConfig?.rest_url+"linkboss/v1/sync",{action:"sync_finish"},{headers:{"X-WP-Nonce":LinkBossConfig.nonce}}),e(),i().fire({icon:"success",title:(0,n.__)("Reset & Sync Completed!","semantic-linkboss"),html:(0,n.__)('If you still see "Sync Remaining" for some contents, just click the "Sync Now" button below.',"semantic-linkboss"),timerProgressBar:!0,didClose:()=>{window.location.reload()}})}catch(e){console.error("Reset & Full Sync Error:",e);let s=(0,n.__)("Error in Stage","semantic-linkboss")+" "+t,a=e.message||(0,n.__)("An error occurred during the reset and sync process.","semantic-linkboss");e.response?.data?.message&&(a=e.response.data.message),i().fire({icon:"error",title:s,html:`\n          <p>${a}</p>\n          <p class="mt-2 text-sm text-gray-600">${(0,n.__)("You can try again or contact support if the issue persists.","semantic-linkboss")}</p>\n        `,confirmButtonText:(0,n.__)("OK","semantic-linkboss")})}finally{s(!1)}},disabled:t},t?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},(0,a.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),(0,n.__)("Processing...","semantic-linkboss")):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(d.g,{icon:m.BF2,className:"w-4 h-4"}),(0,n.__)("Reset & Full Sync","semantic-linkboss")))),(0,a.createElement)("div",{className:"flex justify-end mt-6"},(0,a.createElement)("button",{onClick:()=>{window.location.hash="sync",window.location.reload()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 hover:bg-blue-200 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800"},(0,a.createElement)(d.g,{icon:m.CeG,className:"w-4 h-4"}),(0,a.createElement)("span",null,(0,n.__)("Back to Sync","semantic-linkboss")))))))}}}]);